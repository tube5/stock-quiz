<!DOCTYPE html>
<html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JSFiddle o8emrL17</title>

  <style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
}

.app {
    width: 100%;
    max-width: 400px;
    aspect-ratio: 9/16;
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    border-radius: 25px;
    padding: 25px 20px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

.quiz-container {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.header {
    text-align: center;
    margin-bottom: 20px;
    position: relative;
}

.score-badge {
    position: absolute;
    top: 0;
    right: 0;
    background: #4facfe;
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
}

.header h1 {
    color: white;
    font-size: 22px;
    font-weight: bold;
    margin-top: 25px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.progress-container {
    margin-bottom: 25px;
}

.progress-bar {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
}

.progress {
    height: 100%;
    background: linear-gradient(90deg, #4facfe, #00f2fe);
    border-radius: 10px;
    transition: width 0.3s ease;
    width: 0%;
}

.question-info {
    text-align: center;
    color: white;
    font-size: 14px;
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.question-container {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin-bottom: 30px;
}

.question-container h2 {
    color: #333;
    font-size: 18px;
    line-height: 1.4;
    padding: 25px 20px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    font-weight: 600;
    width: 100%;
}

.answers-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 30px;
}

.answer-btn {
    background: white;
    color: #333;
    border: 2px solid #e0e0e0;
    border-radius: 15px;
    padding: 18px 15px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
}

.answer-btn:hover {
    background: #f5f5f5;
    border-color: #4facfe;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
}

.answer-btn:active {
    transform: translateY(0);
}

.answer-btn.correct {
    background: linear-gradient(135deg, #28a745, #20c997);
    color: white;
    border-color: #28a745;
    animation: correctPulse 0.6s ease;
}

.answer-btn.wrong {
    background: linear-gradient(135deg, #dc3545, #fd7e14);
    color: white;
    border-color: #dc3545;
    animation: wrongShake 0.6s ease;
}

.answer-btn.disabled {
    pointer-events: none;
    opacity: 0.6;
}

@keyframes correctPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.result-screen {
    text-align: center;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.result-screen h2 {
    color: white;
    font-size: 28px;
    margin-bottom: 20px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.final-score {
    font-size: 48px;
    font-weight: bold;
    color: white;
    margin-bottom: 20px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.restart-btn {
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    color: white;
    border: none;
    border-radius: 25px;
    padding: 15px 30px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 20px;
}

.restart-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    animation: fadeIn 0.3s ease;
}

.modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 40px 30px;
    border-radius: 20px;
    width: 90%;
    max-width: 350px;
    text-align: center;
    animation: slideIn 0.3s ease;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.modal-content h3 {
    font-size: 22px;
    margin-bottom: 15px;
    font-weight: bold;
}

.modal-content p {
    color: #666;
    line-height: 1.6;
    margin-bottom: 25px;
    font-size: 16px;
}

.modal-btn {
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    color: white;
    border: none;
    border-radius: 25px;
    padding: 15px 25px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
}

.modal-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideIn {
    from { 
        transform: translate(-50%, -60%); 
        opacity: 0; 
    }
    to { 
        transform: translate(-50%, -50%); 
        opacity: 1; 
    }
}

@media (max-width: 480px) {
    .app {
        max-width: 100%;
        margin: 0;
        border-radius: 0;
        aspect-ratio: auto;
        min-height: 100vh;
    }
    
    .header h1 {
        font-size: 20px;
    }
    
    .question-container h2 {
        font-size: 16px;
        padding: 20px 15px;
    }
    
    .answer-btn {
        font-size: 14px;
        padding: 16px 12px;
        height: 55px;
    }
    
    .modal-content {
        width: 95%;
        padding: 30px 20px;
    }
}

  </style>

  
</head>
<body>
  <div class="app">
    <div class="quiz-container">
        <div class="header">
            <div class="score-badge">Ï†êÏàò: <span id="score">0</span></div>
            <h1 id="quizTitle">ÌäπÏßïÏ£º ÌÄ¥Ï¶à</h1>
        </div>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="question-info">
                <span id="currentQuestion">1</span> / <span id="totalQuestions">10</span>
            </div>
        </div>
        <div class="question-container">
            <h2 id="question">Î¨∏Ï†ú Î°úÎî© Ï§ë...</h2>
        </div>
        <div class="answers-container">
            <button class="answer-btn" data-index="0">ÏÑ†ÌÉùÏßÄ 1</button>
            <button class="answer-btn" data-index="1">ÏÑ†ÌÉùÏßÄ 2</button>
            <button class="answer-btn" data-index="2">ÏÑ†ÌÉùÏßÄ 3</button>
            <button class="answer-btn" data-index="3">ÏÑ†ÌÉùÏßÄ 4</button>
        </div>
    </div>
    <div class="result-screen" id="resultScreen" style="display: none;">
        <h2>ÌÄ¥Ï¶à ÏôÑÎ£å!</h2>
        <div class="final-score">
            <span id="finalScore"></span> / 100Ï†ê
        </div>
        <p id="resultMessage"></p>
        <button class="restart-btn" id="restartBtn">Îã§Ïãú ÏãúÏûë</button>
    </div>
</div>

<div id="resultModal" class="modal">
    <div class="modal-content">
        <h3 id="modalTitle">Ï†ïÎãµÏûÖÎãàÎã§!</h3>
        <p id="modalMessage">ÏÑ§Î™ÖÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§</p>
        <button class="modal-btn" id="nextBtn">Îã§Ïùå Î¨∏Ï†ú</button>
    </div>
</div>

<!-- js-confetti ÎùºÏù¥Î∏åÎü¨Î¶¨ CDN -->
<script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>


  <script>
    // Ïò§ÎäòÏùò ÌäπÏßïÏ£º Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ (15Í∞ú)
const quizData = [
    {
        question: "ÏÉùÎ∂ÑÌï¥ÏÑ± Ìè¨Ïû•Ïû¨ Í¥ÄÎ†® Ï†ïÏ±Ö Î∞úÌëúÎ°ú Ï£ºÎ™©Î∞õÎäî Ï¢ÖÎ™©ÏùÄ?",
        answers: ["ÌïúÍµ≠Ìå©ÌÇ§ÏßÄ", "ÏóêÏΩîÌîåÎùºÏä§Ìã±", "ÏßÑÏòÅ", "ÎåÄÌïúÍ¥ëÌÜµÏã†"],
        correct: "ÌïúÍµ≠Ìå©ÌÇ§ÏßÄ",
        theme: "ÏÉùÎ∂ÑÌï¥ÏÑ± Ìè¨Ïû•Ïû¨"
    },
    {
        question: "Ï°∞ÌòÑÎ≤î ÌöåÏû•Ïùò 1Ïã¨ Î≤ïÏ†ïÍµ¨ÏÜç ÏÜåÏãùÏúºÎ°ú Í∏âÎì±Ìïú Ï¢ÖÎ™©ÏùÄ?",
        answers: ["ÌïòÏù¥Î∏å", "ÌïúÍµ≠Ïï§Ïª¥ÌçºÎãà", "Ïú†ÎÇòÏù¥Ìã∞ÎìúÏ†úÏïΩ", "Ï†ÑÏßÑÍ±¥ÏÑ§Î°úÎ¥á"],
        correct: "ÌïúÍµ≠Ïï§Ïª¥ÌçºÎãà",
        theme: "Ï°∞ÌòÑÎ≤î ÌöåÏû•Ïùò 1Ïã¨ Î≤ïÏ†ïÍµ¨ÏÜç"
    },
    {
        question: "Ï†ÑÍ∏∞Ï∞® Ï†ÑÌôò ÏµúÎåÄ ÏàòÌòúÏ£ºÎ°ú Î∂ÑÏÑùÎ∞õÎäî Ï¢ÖÎ™©ÏùÄ?",
        answers: ["HDÌòÑÎåÄÎßàÎ¶∞ÏóîÏßÑ", "ÌïúÍµ≠Îã®Ïûê", "HSÌö®ÏÑ±", "ÌòÑÎåÄÎ°úÌÖú"],
        correct: "ÌïúÍµ≠Îã®Ïûê",
        theme: "Ï†ÑÍ∏∞Ï∞® Ï†ÑÌôò ÏµúÎåÄ ÏàòÌòúÏ£º"
    },
    {
        question: "ÎØ∏Íµ≠ Ï†úÏïΩÎ∞îÏù¥Ïò§ Í∏∞ÏóÖÍ≥º 5,953ÏñµÏõê Í∏∞Ïà†Ïù¥Ï†Ñ Í≥ÑÏïΩ Ï¢ÖÎ™©ÏùÄ?",
        answers: ["HLBÌé©", "ÎÇòÏù¥Î≤°", "Ïú†ÎÇòÏù¥Ìã∞ÎìúÏ†úÏïΩ", "Ïù∏ÌÅ¨Î°úÏä§"],
        correct: "ÎÇòÏù¥Î≤°",
        theme: "ÎØ∏Íµ≠ Ï†úÏïΩÎ∞îÏù¥Ïò§ Í∏∞ÏóÖÍ≥º 5,953ÏñµÏõê Í∏∞Ïà†Ïù¥Ï†Ñ Í≥ÑÏïΩ"
    },
    {
        question: "ÎØ∏Íµ≠ ÏàòÏ£ºÏûîÍ≥†Í∞Ä 750% Í∏âÏ¶ùÌïú Ï¢ÖÎ™©ÏùÄ?",
        answers: ["ÎåÄÌïúÍ¥ëÌÜµÏã†", "Ïú†ÎîîÏó†ÌÖç", "Ïã†ÏõêÏ¢ÖÌï©Í∞úÎ∞ú", "KX"],
        correct: "ÎåÄÌïúÍ¥ëÌÜµÏã†",
        theme: "ÎØ∏Íµ≠ ÏàòÏ£ºÏûîÍ≥†Í∞Ä 750% Í∏âÏ¶ù"
    },
    {
        question: "K2 Ï†ÑÏ∞® ÏàòÏöî Ï¶ùÍ∞ÄÎ°ú ÏÑ±Ïû• Ï†ÑÎßùÏùÑ Î∞õÎäî Ï¢ÖÎ™©ÏùÄ?",
        answers: ["Ï†ÑÏßÑÍ±¥ÏÑ§Î°úÎ¥á", "ÌòÑÎåÄÎ°úÌÖú", "HDÌòÑÎåÄÎßàÎ¶∞ÏóîÏßÑ", "ÌïúÍµ≠Îã®Ïûê"],
        correct: "ÌòÑÎåÄÎ°úÌÖú",
        theme: "K2 Ï†ÑÏ∞® ÏàòÏöî Ï¶ùÍ∞ÄÎ°ú ÏÑ±Ïû• Ï†ÑÎßù"
    },
    {
        question: "Î∂ÅÎØ∏ ÏãúÏû•Ï†êÏú†Ïú® 27.5%Î°ú 1ÏúÑÎ•º Í∏∞Î°ùÌïòÎäî Ï¢ÖÎ™©ÏùÄ?",
        answers: ["Ï†ÑÏßÑÍ±¥ÏÑ§Î°úÎ¥á", "ÌòÑÎåÄÎ°úÌÖú", "HDÌòÑÎåÄÎßàÎ¶∞ÏóîÏßÑ", "Ïú†ÎîîÏó†ÌÖç"],
        correct: "Ï†ÑÏßÑÍ±¥ÏÑ§Î°úÎ¥á",
        theme: "Î∂ÅÎØ∏ ÏãúÏû•Ï†êÏú†Ïú® 27.5%Î°ú 1ÏúÑ"
    },
    {
        question: "ÎãàÏºÄ Ï§ëÍµ≠ Ï∂úÏãúÎ°ú ÏïàÏ†ïÏ†Å Îß§Ï∂ú Ï†ÑÎßùÏùÑ Î∞õÎäî Ï¢ÖÎ™©ÏùÄ?",
        answers: ["ÌïòÏù¥Î∏å", "ÏãúÌîÑÌä∏ÏóÖ", "KX", "Ïù∏ÌÅ¨Î°úÏä§"],
        correct: "ÏãúÌîÑÌä∏ÏóÖ",
        theme: "ÎãàÏºÄ Ï§ëÍµ≠ Ï∂úÏãúÎ°ú ÏïàÏ†ïÏ†Å Îß§Ï∂ú Ï†ÑÎßù"
    },
    {
        question: "ÎåÄÎßå ÏãùÏïΩÏ≤òÏóêÏÑú Îç∞Î™®ÌîÑÎ†àÏã† ÌíàÎ™©ÌóàÍ∞ÄÎ•º Î∞õÏùÄ Ï¢ÖÎ™©ÏùÄ?",
        answers: ["ÎÇòÏù¥Î≤°", "HLBÌé©", "Ïú†ÎÇòÏù¥Ìã∞ÎìúÏ†úÏïΩ", "Î©îÎîîÏΩïÏä§"],
        correct: "HLBÌé©",
        theme: "ÎåÄÎßå ÏãùÏïΩÏ≤òÏóêÏÑú Îç∞Î™®ÌîÑÎ†àÏã† ÌíàÎ™©ÌóàÍ∞Ä"
    },
    {
        question: "Í∞úÎüâ Ïã†ÏïΩ Í∞úÎ∞úÎ°ú Ï†ÄÌèâÍ∞Ä Î∂ÑÏÑùÏùÑ Î∞õÎäî Ï¢ÖÎ™©ÏùÄ?",
        answers: ["Ïú†ÎÇòÏù¥Ìã∞ÎìúÏ†úÏïΩ", "HLBÌé©", "ÎÇòÏù¥Î≤°", "Ïù¥ÎãàÌÖç"],
        correct: "Ïú†ÎÇòÏù¥Ìã∞ÎìúÏ†úÏïΩ",
        theme: "Í∞úÎüâ Ïã†ÏïΩ Í∞úÎ∞úÎ°ú Ï†ÄÌèâÍ∞Ä Î∂ÑÏÑù"
    },
    {
        question: "ÏÉùÎ∂ÑÌï¥ ÌîåÎùºÏä§Ìã± Í¥ÄÎ†®Ï£ºÍ∞Ä ÏïÑÎãå Í≤ÉÏùÄ?",
        answers: ["ÏóêÏΩîÌîåÎùºÏä§Ìã±", "ÏßÑÏòÅ", "ÌïúÍµ≠Ìå©ÌÇ§ÏßÄ", "ÎåÄÌïúÍ¥ëÌÜµÏã†"],
        correct: "ÎåÄÌïúÍ¥ëÌÜµÏã†",
        theme: "ÏÉùÎ∂ÑÌï¥ ÌîåÎùºÏä§Ìã± Í¥ÄÎ†®Ï£ºÍ∞Ä ÏïÑÎãå Í≤É"
    },
    {
        question: "ÏòµÌä∏Îùº ÌîåÎû´ÌèºÏùÑ ÎØ∏Íµ≠Ïóê Ï≤´ Í≥µÍ∞úÌïú Ï¢ÖÎ™©ÏùÄ?",
        answers: ["Ïú†ÎîîÏó†ÌÖç", "Ïù∏ÌÅ¨Î°úÏä§", "Ïã†ÌïúÏ†ú16Ìò∏Ïä§Ìå©", "Ïã†ÏõêÏ¢ÖÌï©Í∞úÎ∞ú"],
        correct: "Ïú†ÎîîÏó†ÌÖç",
        theme: "ÏòµÌä∏Îùº ÌîåÎû´ÌèºÏùÑ ÎØ∏Íµ≠Ïóê Ï≤´ Í≥µÍ∞ú"
    },
    {
        question: "SKT Ìï¥ÌÇπ ÏàòÌòú Í∏∞ÎåÄÍ∞êÏúºÎ°ú ÏÉÅÏäπÌïú Ï¢ÖÎ™©ÏùÄ?",
        answers: ["KX", "Ïù∏ÌÅ¨Î°úÏä§", "Ïú†ÎîîÏó†ÌÖç", "ÎåÄÌïúÍ¥ëÌÜµÏã†"],
        correct: "Ïù∏ÌÅ¨Î°úÏä§",
        theme: "SKT Ìï¥ÌÇπ ÏàòÌòú Í∏∞ÎåÄÍ∞ê"
    },
    {
        question: "ÌöåÍ≥Ñ Î∂ÄÏ†ï ÌòêÏùòÎ°ú ÏïΩÏÑ∏Î•º Î≥¥Ïù∏ Ï¢ÖÎ™©ÏùÄ?",
        answers: ["Ïù¥ÎãàÌÖç", "Î©îÎîîÏΩïÏä§", "ÌïòÏù¥Î∏å", "ÌïúÍµ≠Ïï§Ïª¥ÌçºÎãà"],
        correct: "Î©îÎîîÏΩïÏä§",
        theme: "ÌöåÍ≥Ñ Î∂ÄÏ†ï ÌòêÏùò"
    },
    {
        question: "HDÌòÑÎåÄÎØ∏Ìè¨ÏôÄ 1,090ÏñµÏõê Í≥ÑÏïΩÏùÑ Ï≤¥Í≤∞Ìïú Ï¢ÖÎ™©ÏùÄ?",
        answers: ["HDÌòÑÎåÄÎßàÎ¶∞ÏóîÏßÑ", "ÌòÑÎåÄÎ°úÌÖú", "Ï†ÑÏßÑÍ±¥ÏÑ§Î°úÎ¥á", "ÌïúÍµ≠Îã®Ïûê"],
        correct: "HDÌòÑÎåÄÎßàÎ¶∞ÏóîÏßÑ",
        theme: "HDÌòÑÎåÄÎØ∏Ìè¨ÏôÄ 1,090ÏñµÏõê Í≥ÑÏïΩ"
    }
];

// Ï†ÑÏó≠ Î≥ÄÏàò
let currentQuestionIndex = 0;
let score = 0;
let totalQuestions = 10;
let selectedQuestions = [];
let currentQuestion = null;
let audioContext = null;
let audioEnabled = false;
let jsConfetti = null;

// üéµ ÏôÑÎ≤ΩÌïú ÏùåÌñ• ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî
function initAudioSystem() {
    try {
        // AudioContext ÏÉùÏÑ± (Î∏åÎùºÏö∞Ï†Ä Ìò∏ÌôòÏÑ±)
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        audioContext = new AudioContext();
        audioEnabled = true;
        console.log('üîä ÏùåÌñ• ÏãúÏä§ÌÖú ÌôúÏÑ±Ìôî ÏôÑÎ£å!');
    } catch (error) {
        console.log('‚ùå ÏùåÌñ• ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî Ïã§Ìå®:', error);
        audioEnabled = false;
    }
}

// üéµ Web Audio APIÎ°ú Í≥†ÌíàÏßà ÏÇ¨Ïö¥Îìú ÏÉùÏÑ±
function createSound(type) {
    if (!audioEnabled || !audioContext) return;
    
    try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        switch(type) {
            case 'correct':
                // üé∂ Ï†ïÎãµ: ÏïÑÎ¶ÑÎã§Ïö¥ ÏÉÅÏäπ ÌïòÎ™®Îãà (C-E-G-C)
                playMelody([261.63, 329.63, 392.00, 523.25], 0.15, 'sine');
                break;
                
            case 'wrong':
                // ‚ùå Ïò§Îãµ: ÌïòÍ∞ï buzzer ÏÇ¨Ïö¥Îìú
                oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(150, audioContext.currentTime + 0.6);
                oscillator.type = 'square';
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.6);
                break;
                
            case 'complete':
                // üéâ ÏôÑÎ£å: ÌôòÏÉÅÏ†ÅÏù∏ Ìå°ÌååÎ•¥ (C-E-G-C-E-G-C)
                playMelody([261.63, 329.63, 392.00, 523.25, 659.25, 783.99, 1046.50], 0.2, 'triangle');
                break;
        }
    } catch (error) {
        console.log('ÏÇ¨Ïö¥Îìú Ïû¨ÏÉù Ïò§Î•ò:', error);
    }
}

// üéµ Î©úÎ°úÎîî Ïû¨ÏÉù Ìï®Ïàò
function playMelody(frequencies, noteDuration, waveType = 'sine') {
    frequencies.forEach((freq, index) => {
        setTimeout(() => {
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.connect(gain);
            gain.connect(audioContext.destination);
            
            osc.frequency.value = freq;
            osc.type = waveType;
            
            gain.gain.setValueAtTime(0.15, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + noteDuration);
            
            osc.start();
            osc.stop(audioContext.currentTime + noteDuration);
        }, index * (noteDuration * 1000));
    });
}

// üéâ js-confettiÎ°ú ÌôòÏÉÅÏ†ÅÏù∏ Ìè≠Ï£ΩÍ∞ÄÎ£® Ìö®Í≥º
function createConfettiEffect() {
    if (!jsConfetti) {
        jsConfetti = new JSConfetti();
    }
    
    // üåà Ïª¨Îü¨ÌíÄÌïú Ìè≠Ï£ΩÍ∞ÄÎ£® Ìö®Í≥º
    jsConfetti.addConfetti({
        confettiColors: [
            '#ff0a54', '#ff477e', '#ff7096', '#ff85a1', 
            '#fbb1bd', '#f9bec7', '#4facfe', '#00f2fe',
            '#FFD700', '#FF69B4', '#00CED1', '#32CD32'
        ],
        confettiRadius: 4,
        confettiNumber: 100,
    });
    
    // 0.5Ï¥à ÌõÑ Ï∂îÍ∞Ä Ìè≠Ï£ΩÍ∞ÄÎ£®
    setTimeout(() => {
        jsConfetti.addConfetti({
            confettiColors: ['#FFD700', '#FFA500', '#FF6347'],
            confettiRadius: 3,
            confettiNumber: 50,
        });
    }, 500);
}

// Î∞∞Ïó¥ ÏÖîÌîå
function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
}

// 15Í∞ú Î¨∏Ï†ú Ï§ë 10Í∞ú ÎûúÎç§ ÏÑ†ÌÉù
function selectUniqueQuestions() {
    const indices = Array.from({length: quizData.length}, (_, i) => i);
    const shuffledIndices = shuffleArray(indices);
    const selectedIndices = shuffledIndices.slice(0, totalQuestions);
    
    selectedQuestions = selectedIndices.map(index => ({
        ...quizData[index],
        originalIndex: index
    }));
}

// Î¨∏Ï†ú ÌëúÏãú (Î≥¥Í∏∞ ÏàúÏÑúÎèÑ Îß§Î≤à ÎûúÎç§)
function displayQuestion() {
    currentQuestion = selectedQuestions[currentQuestionIndex];
    
    // Î≥¥Í∏∞ ÏàúÏÑú ÎûúÎç§ÏúºÎ°ú ÏÑûÍ∏∞
    const shuffledAnswers = shuffleArray([...currentQuestion.answers]);
    currentQuestion.shuffledAnswers = shuffledAnswers;
    currentQuestion.correctIndex = shuffledAnswers.findIndex(answer => answer === currentQuestion.correct);
    
    document.getElementById('question').textContent = currentQuestion.question;
    document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
    document.getElementById('totalQuestions').textContent = totalQuestions;
    
    const answerButtons = document.querySelectorAll('.answer-btn');
    answerButtons.forEach((btn, index) => {
        btn.textContent = shuffledAnswers[index];
        btn.className = 'answer-btn';
        btn.disabled = false;
    });
    
    const progress = ((currentQuestionIndex) / totalQuestions) * 100;
    document.getElementById('progress').style.width = progress + '%';
}

// ÎãµÏïà ÏÑ†ÌÉù
function selectAnswer(answerIndex) {
    // üéµ Ï≤´ ÌÅ¥Î¶≠ Ïãú Ïò§ÎîîÏò§ ÏãúÏä§ÌÖú ÌôúÏÑ±Ìôî
    if (!audioEnabled) {
        initAudioSystem();
    }
    
    const answerButtons = document.querySelectorAll('.answer-btn');
    answerButtons.forEach(btn => {
        btn.classList.add('disabled');
        btn.disabled = true;
    });
    
    let isCorrect = answerIndex === currentQuestion.correctIndex;
    let modalTitle, modalMessage;
    
    if (isCorrect) {
        answerButtons[answerIndex].classList.add('correct');
        score += 10;
        document.getElementById('score').textContent = score;
        
        modalTitle = 'Ï†ïÎãµÏûÖÎãàÎã§!';
        modalMessage = `${currentQuestion.theme} Í¥ÄÎ†®Ï£ºÎäî ${currentQuestion.correct}ÏûÖÎãàÎã§`;
        
        // üéµüéâ Ï†ïÎãµ Ìö®Í≥º: ÏùåÌñ• + Ìè≠Ï£ΩÍ∞ÄÎ£®
        createSound('correct');
        createConfettiEffect();
    } else {
        answerButtons[answerIndex].classList.add('wrong');
        answerButtons[currentQuestion.correctIndex].classList.add('correct');
        
        modalTitle = 'Ïò§ÎãµÏûÖÎãàÎã§.';
        modalMessage = `${currentQuestion.theme} Í¥ÄÎ†®Ï£ºÎäî ${currentQuestion.correct}ÏûÖÎãàÎã§`;
        
        // ‚ùå Ïò§Îãµ ÏùåÌñ•
        createSound('wrong');
    }
    
    setTimeout(() => {
        showModal(modalTitle, modalMessage, isCorrect);
    }, 500);
}

// Î™®Îã¨ ÌëúÏãú
function showModal(title, message, isCorrect) {
    const modal = document.getElementById('resultModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalMessage = document.getElementById('modalMessage');
    
    modalTitle.textContent = title;
    modalTitle.style.color = isCorrect ? '#28a745' : '#dc3545';
    modalMessage.textContent = message;
    
    modal.style.display = 'block';
}

// Î™®Îã¨ Îã´Í∏∞ Î∞è Îã§Ïùå Î¨∏Ï†ú
function closeModalAndNext() {
    document.getElementById('resultModal').style.display = 'none';
    
    setTimeout(() => {
        currentQuestionIndex++;
        
        if (currentQuestionIndex < totalQuestions) {
            displayQuestion();
        } else {
            showResult();
        }
    }, 300);
}

// Í≤∞Í≥º ÌôîÎ©¥
function showResult() {
    document.querySelector('.quiz-container').style.display = 'none';
    document.getElementById('resultScreen').style.display = 'flex';
    
    const percentage = (score / 100) * 100;
    document.getElementById('finalScore').textContent = score;
    
    let resultMessage;
    if (percentage >= 80) {
        resultMessage = 'ÌõåÎ•≠Ìï©ÎãàÎã§! ÌäπÏßïÏ£º Ï†ÑÎ¨∏Í∞ÄÍµ∞Ïöî! üéâ';
    } else if (percentage >= 60) {
        resultMessage = 'Ï¢ãÏäµÎãàÎã§! ÏãúÏû• Í∞êÍ∞ÅÏù¥ Îõ∞Ïñ¥ÎÇòÎÑ§Ïöî! üìà';
    } else if (percentage >= 40) {
        resultMessage = 'Í¥úÏ∞ÆÏäµÎãàÎã§! Ï°∞Í∏à Îçî Í≥µÎ∂ÄÌï¥Î≥¥ÏÑ∏Ïöî! üìö';
    } else {
        resultMessage = 'ÏïÑÏßÅ Í≥µÎ∂ÄÍ∞Ä Îçî ÌïÑÏöîÌï¥Ïöî! ÌôîÏù¥ÌåÖ! üí™';
    }
    
    document.getElementById('resultMessage').textContent = resultMessage;
    
    // üéµüéâ ÏôÑÎ£å ÏùåÌñ• + ÎåÄÌòï Ìè≠Ï£ΩÍ∞ÄÎ£®
    createSound('complete');
    if (jsConfetti) {
        jsConfetti.addConfetti({
            emojis: ['üéâ', 'üéä', 'üåü', '‚ú®', 'üéà'],
            emojiSize: 50,
            confettiNumber: 30,
        });
    }
}

// ÌÄ¥Ï¶à Ïû¨ÏãúÏûë
function restartQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    
    document.getElementById('score').textContent = score;
    document.querySelector('.quiz-container').style.display = 'flex';
    document.getElementById('resultScreen').style.display = 'none';
    
    selectUniqueQuestions();
    displayQuestion();
}

// Ï¥àÍ∏∞Ìôî
function initQuiz() {
    selectUniqueQuestions();
    displayQuestion();
}

// DOM Î°úÎìú ÌõÑ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ÏÑ§Ï†ï
document.addEventListener('DOMContentLoaded', function() {
    // ÎãµÏïà Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
    const answerButtons = document.querySelectorAll('.answer-btn');
    answerButtons.forEach((btn, index) => {
        btn.addEventListener('click', function() {
            selectAnswer(index);
        });
    });
    
    // Îã§Ïùå Î¨∏Ï†ú Î≤ÑÌäº
    document.getElementById('nextBtn').addEventListener('click', closeModalAndNext);
    
    // Ïû¨ÏãúÏûë Î≤ÑÌäº
    document.getElementById('restartBtn').addEventListener('click', restartQuiz);
    
    // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠
    document.getElementById('resultModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeModalAndNext();
        }
    });
    
    // ÌÄ¥Ï¶à ÏãúÏûë
    initQuiz();
});

// Ï†ÑÏó≠ Ìï®Ïàò ÎÖ∏Ï∂ú
window.selectAnswer = selectAnswer;
window.closeModalAndNext = closeModalAndNext;
window.restartQuiz = restartQuiz;

  </script>
</body>
</html>
